<plugin>
	<groupId>org.eclipse.jetty</groupId>
	<artifactId>jetty-maven-plugin</artifactId>
	<version>9.4.11.v20180605</version>
	<configuration>
		<webApp>
			<contextPath>/calculator</contextPath>
		</webApp>
		<webAppSourceDirectory>target/${project.artifactId}-${project.version}</webAppSourceDirectory>
		<stopPort>8079</stopPort>
		<stopKey>stop-jetty-for-it</stopKey>
		<stopWait>10</stopWait>
		<httpConnector>
			<port>9999</port>
			<idleTimeout>60000</idleTimeout>
		</httpConnector>
	</configuration>
	<executions>
		<execution>
			<id>start-jetty</id>
			<phase>pre-integration-test</phase>
			<goals>
				<goal>start</goal>
			</goals>
			<configuration>
				<scanIntervalSeconds>0</scanIntervalSeconds>
				<daemon>true</daemon>
			</configuration>
		</execution>
		<execution>
			<id>stop-jetty</id>
			<phase>post-integration-test</phase>
			<goals>
				<goal>stop</goal>
			</goals>
		</execution>
	</executions>
</plugin>

<plugin>
	<groupId>org.apache.maven.plugins</groupId>
	<artifactId>maven-surefire-plugin</artifactId>
	<version>2.22.0</version>
	<executions>
		<execution>
			<id>run-integration-test</id>
			<phase>integration-test</phase>
			<goals>
				<goal>test</goal>
			</goals>
			<configuration>
				<includes>
					<include>**/*IT.java</include>
				</includes>
			</configuration>
		</execution>
	</executions>
</plugin>